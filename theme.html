<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Profile Card UI</title>
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        background-color: #121212;
        color: white;
        font-family: "Arial", sans-serif;
      }

      .container{
        justify-items: center;
      }

      .banner {
        display: flex;
        align-items: center;
        justify-content: center;
        border-bottom: 3px solid #00bfff;
      }

      .profile-section {
        text-align: center;
        margin-top: -25px;
      }

      .profile-pic {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        border: 3px solid #00bfff;
      }

      .profile-name {
        font-size: 1.5rem;
        margin-top: 10px;
      }

      .profile-title {
        font-size: 1rem;
        color: #b0b0b0;
      }

      .profile-description {
        font-size: 0.9rem;
        padding: 10px;
        color: #c5c5c5;
      }

      .btn-group {
        display: flex;
        justify-content: center;
        gap: 10px;
      }

      .btn-custom {
        background-color: #1c1c1e;
        color: white;
        border: 1px solid #2c2c2e;
        border-radius: 20px;
      }

      .btn-custom:hover {
        background-color: #2a2a2e;
      }

      .social-icons {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-around;
        margin-top: 20px;
      }

      .social-icons a {
        width: 70px;
        height: 70px;
        background-color: #2a2a2a;
        border-radius: 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 2rem;
        margin-bottom: 10px;
      }

      .social-icons a:hover {
        background-color: #444444;
      }

      .social-icons img {
        width: 40px;
        height: 40px;
      }

      .card {
        transition: transform 0.2s;
        height: 100%;
      }

      .card:hover {
        transform: translateY(-5px);
      }

      .card-img-top {
        height: 200px;
        object-fit: cover;
      }

      .social-icons {
        margin-bottom: 20px;
      }

      .social-icons .row {
        margin-bottom: 15px;
      }
    </style>
  </head>

  <body>
    <!-- Banner Section -->
    <div class="banner">
      <img class="img-fluid" src="banner-test.png" alt="banner" />
    </div>

    <!-- Profile Section -->
    <div class="container profile-section">
      <img src="profile.png" alt="Profile Picture" class="profile-pic" />
      <div class="profile-name">Abu Hamza</div>
      <div class="profile-title">C.M.O @ Enemy Group</div>
      <p class="profile-description">
        Co-Creating Enemy Group | Replacing your old paper card with a smarter
        and instant way of networking.
      </p>

      <!-- Action Buttons -->
      <div class="btn-group mb-3">
        <button class="btn btn-custom">Connect With Me</button>
        <button id="save" class="btn btn-custom">Save To Phone</button>
      </div>
    </div>

    <!-- Social Media Links Section -->
    <div class="container social-icons">
      <div class="row">
        <div class="col">
          <a href="#"
            ><img
              src="https://img.icons8.com/fluency/48/whatsapp.png"
              alt="WhatsApp"
          /></a>
        </div>
        <div class="col">
          <a href="#"
            ><img src="https://img.icons8.com/color/48/email.png" alt="Email"
          /></a>
        </div>
        <div class="col">
          <a href="#"
            ><img
              src="https://img.icons8.com/color/48/safari.png"
              alt="Website"
          /></a>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <a href="#"
            ><img
              src="https://img.icons8.com/color/48/linkedin.png"
              alt="LinkedIn"
          /></a>
        </div>
        <div class="col">
          <a href="#"
            ><img
              src="https://img.icons8.com/color/48/instagram-new.png"
              alt="Instagram"
          /></a>
        </div>
        <div class="col">
          <a href="#"
            ><img
              src="https://img.icons8.com/color/48/youtube-play.png"
              alt="YouTube"
          /></a>
        </div>
        <!-- <a href="#"><img src="https://img.icons8.com/color/48/pinterest.png" alt="Pinterest"></a> -->
      </div>
    </div>
    <!-- Bootstrap Contact Section -->
<section class="container bg-dark text-white py-4">
  <div class="container">
    <div class="d-flex flex-column align-items-start">
      <!-- Phone -->
      <div class="d-flex align-items-center mb-3">
        <i class="bi bi-telephone-fill fs-4 me-3"></i>
        <a href="tel:+971585222111" class="text-white text-decoration-none">+971 585222111</a>
      </div>
      <!-- Email -->
      <div class="d-flex align-items-center mb-3">
        <i class="bi bi-envelope-fill fs-4 me-3"></i>
        <a href="mailto:b12.dxb12@gmail.com" class="text-white text-decoration-none">b12.dxb12@gmail.com</a>
      </div>
      <!-- Address -->
      <div class="d-flex align-items-center">
        <i class="bi bi-geo-alt-fill fs-4 me-3"></i>
        <p class="mb-0">11A Street, Al Quoz - Al Quoz Industrial Area 3, Dubai</p>
      </div>
    </div>
  </div>
</section>
<!-- third section -->
<section class="py-5">
  <div class="container">
    <!-- Heading -->
    <h3 class="text-center fw-bold">PRODUCTS AND SERVICES</h3>
    <hr class="mx-auto" style="width: 50px; border-top: 2px solid red;">
    
    <!-- Product Card -->
    <div class="bg-light p-4 mt-4">
      <h5 class="fw-bold">RR GHOST 2019</h5>
      
      <!-- Image Section -->
      <img src="https://via.placeholder.com/500x300" alt="RR Ghost 2019" class="img-fluid mb-3">
      
      <!-- Price and Inquiry Button -->
      <div class="d-flex align-items-center">
        <span class="me-3">Price:</span>
        <button class="btn btn-dark">Enquiry</button>
      </div>
    </div>
  </div>
</section>
    <!-- Bootstrap JS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Add this just before the closing body tag -->
    <script>

      async function fetchUserProfile(userId) {
        try {
          const response = await fetch(
            `https://rfc-backend.onrender.com/user/get/${userId}`
          );
          if (!response.ok) return null;
          return await response.json();
        } catch (error) {
          console.error("Error fetching profile:", error);
          return null;
        }
      }

      async function loadUserData() {
        // Extract userId from URL query parameters
        const urlParams = new URLSearchParams(window.location.search);
        const userId = urlParams.get("userId");

        if (!userId) {
          console.error("No userId provided in URL");
          return;
        }

        const userData = await fetchUserProfile(userId);
        if (!userData) {
          console.error("Could not fetch user data");
          return;
        }

        console.log("Loaded user data:", userData); // Debug log

        // Update basic information
        document.querySelector(".profile-pic").src =
          userData.avatar || "profile.png";
        document.querySelector(".banner img").src =
          userData.backgroundImage || "banner-test.png";
        document.querySelector(".profile-name").textContent =
          userData.name || "";
        document.querySelector(".profile-title").textContent =
          userData.headline || "";

        // Update social accounts
        const socialIconsContainer = document.querySelector(".social-icons");
        socialIconsContainer.innerHTML = ""; // Clear existing icons

        // Create rows for social accounts
        const socialAccounts = userData.socialAccounts || [];
        const ITEMS_PER_ROW = 3;

        for (let i = 0; i < socialAccounts.length; i += ITEMS_PER_ROW) {
          const rowAccounts = socialAccounts.slice(i, i + ITEMS_PER_ROW);
          const row = document.createElement("div");
          row.className = "row";

          rowAccounts.forEach((account) => {
            const col = document.createElement("div");
            col.className = "col";

            // Map account types to icon URLs
            const iconMap = {
              github: "https://img.icons8.com/fluency/48/github.png",
              linkedin: "https://img.icons8.com/color/48/linkedin.png",
              instagram: "https://img.icons8.com/color/48/instagram-new.png",
              youtube: "https://img.icons8.com/color/48/youtube-play.png",
              // Add more mappings as needed
            };

            col.innerHTML = `
              <a href="${account.handle}" target="_blank">
                <img src="${
                  iconMap[account.accountType.toLowerCase()] ||
                  "https://img.icons8.com/color/48/link.png"
                }" 
                     alt="${account.accountType}">
              </a>
            `;
            row.appendChild(col);
          });

          socialIconsContainer.appendChild(row);
        }

        // Add default contact methods
        const contactRow = document.createElement("div");
        contactRow.className = "row mt-3";
        contactRow.innerHTML = `
          <div class="col">
            <a href="https://wa.me/${userData.whatsapp}"><img src="https://img.icons8.com/fluency/48/whatsapp.png" alt="WhatsApp"></a>
          </div>
          <div class="col">
            <a href="mailto:${userData.email}"><img src="https://img.icons8.com/color/48/email.png" alt="Email"></a>
          </div>
          <div class="col">
            <a href="#"><img src="https://img.icons8.com/color/48/address.png" alt="Address"></a>
          </div>
        `;
        socialIconsContainer.appendChild(contactRow);

        // Add services section if there are any
        if (userData.services && userData.services.length > 0) {
          const servicesSection = document.createElement("div");
          servicesSection.className = "container mt-4";
          servicesSection.innerHTML =
            '<h4 class="text-center mb-3">Services</h4>';

          const servicesGrid = document.createElement("div");
          servicesGrid.className = "row g-3";

          userData.services.forEach((service) => {
            const serviceCol = document.createElement("div");
            serviceCol.className = "col-md-4";
            serviceCol.innerHTML = `
              <div class="card bg-dark text-white">
                ${
                  service.productImage
                    ? `<img src="${service.productImage}" class="card-img-top" alt="${service.name}">`
                    : ""
                }
                <div class="card-body">
                  <h5 class="card-title">${service.name}</h5>
                  <p class="card-text">${service.description}</p>
                  <p class="card-text"><small class="text-muted">Price: $${
                    service.price
                  }</small></p>
                </div>
              </div>
            `;
            servicesGrid.appendChild(serviceCol);
          });

          servicesSection.appendChild(servicesGrid);
          document.body.appendChild(servicesSection);
        }
      }

      // Load data when page loads
      document.addEventListener("DOMContentLoaded", loadUserData);
    </script>
  </body>
</html>
